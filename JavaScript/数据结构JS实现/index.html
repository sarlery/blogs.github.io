<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    <script>
        
        const Seting = (function(){

            var obj = {},
                sy = Symbol();
            obj[sy] = [];
            class Seting{
                constructor(arr){
                    if(Object.prototype.toString.call(arr) === '[object Array]'){
                        for(let i = 0,len = arr.length;i < len;i ++){
                            var prop = arr[i];
                            console.log(prop);
                            this.add(prop);
                            // if(this.isObjOrAry(prop)){
                            //     obj[sy].push(prop);
                            // }else{
                            //     obj[prop] = prop;
                            // }
                        }
                    }else{
                        throw new TypeError('你应该传入一个数组！');
                    }
                }
                isObjOrAry(elem){
                    var type = Object.prototype.toString.call(elem);
                    if(type === '[object Object]' || type === '[object Array]'){
                        return true;
                    }
                    return false;
                }
                add(value){
                    if(this.isObjOrAry(value)){         // 是对象或者数组
                        obj[sy].push(value);
                    }else{
                        obj[value] = value;
                    }
                }
                has(value){
                    if(this.isObjOrAry(value)){         // Object 和 Array 不是基本类型
                        return false;
                    }else{
                        return (value in obj);
                    }
                }
                values(){
                    let ary = Object.keys(obj);
                    for(let j = 0,len = obj[sy].length;j < len;j ++){
                        ary.push(obj[sy][j]);
                    }
                    return ary;
                }
                size(){
                    return Object.keys(obj).length + obj[sy].length;
                }
                remove(value){
                    if(!this.isObjOrAry(value)){
                        delete obj[value];
                    }else{
                        return false;
                    }
                }
                forEach(callback){
                    var arr = this.values();
                    for(let i = 0,len = arr.length;i < len;i ++){
                        callback(arr[i],i);
                    }
                }
            }

            return Seting;

        })();

        // function aaa(fn){
        //     var ary = [1,2,3,4];
        //     ary.forEach((item) => {
        //         fn(item);
        //     });
        // }

        // aaa(function(c){
        //     console.log(c);
        // });

    </script>
    
</body>
</html>