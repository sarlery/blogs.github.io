# JavaScript 笔试题

## 1. 空对象的强制类型转换  

考虑下面代码，会打印出什么？  

```js
[] + {} = ?
{} + [] = ?
{} + 2 = ?
```

答案： 

```
'[object Object]'
0
2
```

第一个比较好理解，`[]` 会转成字符串与 `{}` 相加，`{}` 也会转成字符串：  

```
[] => ""    // [] 转成空字符串
{} => '[object Object]'
```

第二个结果是数字 `0`。这是因为 `{}` 在表达式左侧时表示不执行任何操作的空代码块，{} + [] 相当于 `+[]`，`+A` 运算会尝试将 `A` 转成数字。`[]` 转成数字是 `0`。  

明白了第二个运算结果的由来，第三个语句也就明白了为什么是 `2`。

相关文档：  

[JavaScript 中的相等性判断](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Equality_comparisons_and_sameness)  

> 需要注意的是，如果把运算式用 `console.log` 包裹，{} + [] 将变成 `'[object Object]'`，`{}` 将不认为是空代码块，它会调用对象的 `toString` 方法，转成字符串。  

## 2. 判断某一年是不是闰年

闰年的 2 月是 29 天。代码如下：  

```js
function isLoopYear(year){
    let date = new Date(year, 2, 0);
    return date.getDate() === 29;
}
```

`Date` 的第一个参数是年份，第二个参数是月份，月份从 0 开始，`2` 表示三月，第三个参数是这个月的第几天，`0` 表示上个月的最后一天。  

## 3. undefined 和 null 的异同

相同部分：  

1. 不包含方法或属性；
2. 都是假值；
3. 都只有一个值；
4. 都是“空缺”的意思；

不同之处：  

1. 含义不同，`undefined` 表示一个未定义的值，`null` 表示一个空的对象；
2. 类型不同，typeof undefined 会得到 `'undefined'`；而 typeof null 会得到 `object`；
3. 数字转换不同，Number(undefined) 会得到 `NaN`；而 Number(null) 会得到 `0`；
4. 在非严格模式下，undefined 能被当作变量来使用和赋值，而 null 不行。  

## 4. 如何理解原型链？
对象之间通过原型关联到一起，就好比用一条锁链将一个个对象连接在一起，在与各个对象挂钩后，最终形成一条原型链。在读取对象的一个属性时，会先在对象中查询自有属性，如果不存在，那么会沿着原型链向上搜索匹配的继承属性，直至找到或到达原型链顶端，才停止搜索。  

## 5. 计算两个日期相隔天数

代码如下： 

```js
function dateInterval(start, end){
    var diff = Math.abs(start - end);       // 取绝对值
    return Math.ceil(diff / 1000 / 60 / 60 / 24);   // 向上取整
}
```

`start` 和 `end` 都是日期对象，两者相减会得到数字类型的毫秒戳。

### 几种获取数字时间戳的方式

```js
+new Date();    // +A 运算会尝试把 A 转成数字类型
Date.now();     // 获取当前时间的毫秒戳
new Date().getTime();
new Date().valueOf();   // 与 getTime 方法一样
Date.parse('2019-10-11');   // 解析一个日期字符串，返回时间戳
```

## 6. 按位取反

- `~{}` = ?
- `~1.24` = ?  

按位非运算符（`～`）会先将所有值转换为整数，再以二进制表示，最后执行按位取反运算。对 `null`、`undefined`、字符串或对象等非数字进行按位非操作，返回的结果都为 `-1`。对任意数值 “X” 进行按位非的操作大致等同于 “-（X+1）”，并且浮点数的小数部分会被截除。