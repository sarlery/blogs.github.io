# 计算机网络

## 1. URL

URL（Uniform Resource Locator）即统一资源定位符。应用程序通过 URL 才能定位到资源所处的位置，URL 相当于一个人的住址。它由 8 部分组成：  

- 协议方案（scheme）。如 http，ftp；
- 登录信息（user和password）；
- 主机（host）；
- 端口（port）；
- 路径（path）；
- 查询字符串（query）；
- 片段（frag）。锚点，如 #frag1；  

## 2. 网关

网关是局域网连接广域网的出口（一个广域网和一个局域网相连需要网关），它可以工作在 OSI 模型网络层以上的不同层次。  


## 3. TCP 三握手

客户端和服务器端会先经历三次握手，然后建立 TCP 连接，具体过程如下。  

1. 客户端发送一个携带 SYN 标志位的包，请求建立连接；
2. 服务器响应一个携带 SYN 和 ACK 标志位的包（SYN + ACK），同意建立连接；
3. 客户端再发送一个携带 ACK 标志位的包，表示连接成功，开始进行数据传输。  

## 4. TCP 四次挥手

当要断开TCP连接时，通信两端就会进行4次挥手的操作。由于连接是双向的，所以客户端和服务器都要发送FIN标志位的包，才算彻底断开了连接，具体过程如下所列。  
1. 客户端发送一个携带FIN标志位的包，请求断开连接。
2. 服务器响应一个携带ACK标志位的包，同意客户端断开连接。
3. 服务器再发送一个携带FIN标志位的包，请求断开连接。
4. 客户端最后发送一个携带ACK标志位的包，同意服务器断开连接。

## 5. TCP 可靠传输

当`TCP`发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。当 TCP 收到发自 TCP 连接另一端的数据时，它将发送一个确认。TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段，同时，不确认收到此报文段。由于 TCP 报文段作为 IP 数据报来传输，而·数据报的到达可能会失序，因此，TCP 报文段的到达也可能会失序。因此，TCP 将对收到的数据进行重新排序，将收到的数据以正确的顺序交给应用层，这就需要对报文进行编号，以确定报文的顺序。

## 4. 路由器如何转发 IP 报文

路由器转发 IP 报文的依据是路由表，通过匹配路由表里的路由项来实现对 IP 报文的转发。当路由器收到一个IP报文时，将报文中的目的 IP 地址提取出来，然后与路由表中路由表项包含的目的地址进行比较。如果与某路由项中的目的地址相同，则认为与此路由项匹配；如果没有路由项能够匹配，则丢弃该 IP 报文。