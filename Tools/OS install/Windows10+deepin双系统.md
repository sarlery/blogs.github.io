# Windows + Deepin 双系统安装实践

这一周没有怎么写代码，玩弄了一番我的电脑。在不到一周的时间里装了不下于十次系统，这一段时间差点疯掉。不过最终结果还可以。现在电脑上有两个系统，Windows 10 和 Deepin。开机的时候可以进行系统之间的切换。  

关于 Deepin 系统，它是Linux的一个发行版本。发行版本我没安装Ubuntu（可能以后会装吧），前一段时间网上说华为笔记本有预装 Deepin 系统，因此心血来潮装了一番。Deepin 系统是国内开发的一款Linux发行版，安装之后界面挺不错的。  

### 我为什么装了那么多次系统？  
这是一件很头大的事。我是第一次安装系统，比较笨手笨脚。安装系统在之前就一直想做（为了体验和学习Linux），但一直没有动手。后来有一次我在磁盘分区操作时，也不知道怎么点的，把基本磁盘全整成了动态磁盘（晕），没错，是全部！弄完之后，也没发现有什么异常，只是磁盘的颜色由深蓝色变成了黄绿色。后来在网上查询动态磁盘的特点，好多人说动态磁盘只支持Windows系统，想要安装双系统或者Windows之外的系统是不行的，除非改回基本磁盘。但改回基本磁盘后，磁盘上的数据会丢失。这我不能接受啊！  

作为一个Windows深度用户，里面有许多对我有用的东西，我不想数据丢失，而且如果数据全部丢失，但并没有解决问题的话，我会崩溃掉。。

### 花了 30 元钱让我开始起步
之后我就在网上查询词条 —— 动态磁盘转会基本磁盘。看到一些无损转换磁盘的案例，大部分都是通过一个软件实现的，但这个软件好像不支持Windows10，因为我下载试了试，结果没事反应。  
时间过了一年，我已经成为一名大三的学生。我不甘心啊！!那一天，我在网上找到了一个无损转换的软件，声称可以支持Windows10，于是抱着侥幸心理下了一个。安装完后点击运行，有一个选项是 “动态磁盘转换”。于是点击，然后说需要你重新启动，我就按着去做。重启之后再进入这个软件，结果提示还让我重启，尼玛，是不是再重启还会让我重启？都怪当时太鲁莽，我点了“取消”，于是屏幕黑了。。。  

系统崩溃了！然后找U盘制作启动盘想要重装系统，心理想数据别丢啊。于是找室友的电脑下载老毛桃和Windows10系统镜像。当时镜像实在某某之家下载的，结果制作了两次都没有装上系统，安装时好像是说丢失安装时需要的文件。在室友的安利下，只好去找学校修电脑的。结果人家不一会装好了系统，还贴心的送了一套office2010，收费30。  

回来打开电脑，发现只有C盘数据丢了，反正C盘也没啥东西，这是挺好的，而且基本硬盘也回来了。但是我不甘心呐！作为一名通信行业的工科生，怎么能连装系统都做不到呢！？于是开启了安装系统的探索之旅。  

### 应下载正版系统
为什么我装就装不上？而店里的老板玩着手机就搞定了，临走时还交了他30块钱。  

没有装上系统我把这归结为系统下的不对。之后我去了一个令人信服的网站 —— [I tell you](https://msdn.itellyou.cn/)。这个网站的资源均来自于官方原版。  

![i tell you](./img/itellyou.png)  

于是开始下载，Windows10 的版本很多，一开始我不太清楚下哪一个，导致之后重装了两次。大多数用户使用的是 Windows10 家庭版。而Windows分为家庭版、教育版、企业版、专业版等多个版本。想要下载家庭版却发现并没有 home、family的字样。出现比较多的是 `Muliple Editions`、`Education` 等版本。这些字样的版本一般保护多个版本。**在 `Muliple Editions` 和 `consumer editions` 中集成了多个版本，里面就有家庭版**。`Education` 是教育版，`Enterprise` 是企业版，`LTSB` 是长期服务支持版。  

因此应该选取 `Muliple Editions` 或者 `consumer editions` 的版本去下载。里面又分 ×86 和 ×64 的系统，这就要看你的电脑了。最好下载近期发布的版本（因为下载比较老的版本时，可能已经停止维护了），我安装系统时是2019年10月，而我下的是2018年9月的一个 ×64 版本的系统。当然也可以是2019年的版本。点击 **详细信息**，然后复制下载链接（你应该下载一个迅雷或者别的）进行下载。  

下载完毕后，还需要下载一个软件，为了制作U盘启动盘。我下载的不是老毛桃，老毛桃不太好感觉，而是 [`Rufus`](http://rufus.ie/) 软件，是国外的软件，支持中文，而且软件非常小，下载之后点击就能运行。  

> 需要注意是，你应该下载原来电脑上的系统（或说原装系统）。你电脑上是 Windows7 就应下载 Windows7，是家庭版就应该下载家庭版。下载别的系统可能要让你激活，而下载和电脑自带的系统会自动激活。  

### 制作启动盘与安装 Windows
在制作启动盘之前，应该校验一下你下载的镜像。  

![校验镜像](./img/download.png)

制作启动盘也很简单。打开下载的 Rufus 软件，导入下好的 Windows 系统镜像文件。  

![Rufus](img/rufus.png)  

点击“开始”，完成之后关闭，一个启动盘就做好了。

#### 安装 Windows
插入制作好的 U 盘。关机，然后开机，点完开机键之后，不停的去按 F2 键（联想电脑）进入 BIOS 界面。一般进入 BIOS 界面的按键是 F2。  

然后把安全模式关掉（Secure Boot 设置为 disabled）。

![](./img/windows_1.png)  

然后按 F10，保存（enter）设置。之后电脑会重启，重启时不停的按 F12 进入 Boot Option Menu 界面，选择 `EFI USB Deveie` 就会就如系统安装界面。  

联系电脑的 Boot Option Menu 界面是按 F12 进入，其他系统进入的按键如下：  
- 台式机一般为：Delete 键
- 笔记本一般为：F2 键
- 惠普笔记本一般为：F10 键
- 联想笔记本一般为：F12 键
- 苹果电脑为：C 键

然后选择 “我没有产品密钥”。

![密钥](./img/windows_4.png)  

然后选择接受，并点击下一步。

![接受](./img/windows_5.png)  

然后会让你选择系统版本，一般是家庭版，然后点击下一步。

![选择操作系统版本](./img/windows_6.png)  

进入安装界面后，可能会问你是更新还是自定义安装，那看你的选择。如果是重新安装，就选第二个（点击）。

![自定义安装](./img/windows_3.png)  

然后选择安装位置，一般选择 C 盘。如果出现以下情况（选择磁盘后，下一步按钮是灰的，不能点），需要进一步解决。如果没出现就安装即可，出现了就往下看。  

![问题](./img/windows_7.png)  

遇到这种情况时，先关掉提示框。然后按下快捷键 `shift + F10`（笔记本是：`shift + Fn + F10`），就会调出 Windows 的命令窗口。输入 `diskpart` 命令。  

然后输入 `list disk`，就会出现如下结果：

![list disk](img/windows_8.png)  

然后输入 `select disk 1` （因为磁盘 1 是我的 C 盘）。然后输入 `clean` 删除磁盘分区并格式化，然后输入 `convert GPT` 回车，将当前磁盘分区为 GPT 形式。  

需要注意的是，你制作启动盘时，如果分区类型是 GPT，则应格式化为 GPT 格式，而如果启动盘的分区类型是 MBR，则应输入 `convert MBR`。  

然后输入 `exit` 退出 diskpart。  
再输入命令 `convert c:/fs:ntfs` 将 C 盘转成 NTFS 格式的磁盘，然后 `exit` 回车即可。  

这时就会发现 C 盘可以安装 Windows 了。  

### 双系统安装之前的准备
最好先安装 Windows，再安装 Deepin。  
来到 Windows 的磁盘管理处（右键 “此电脑” --> 点击“管理” --> 存储里面有一个“磁盘管理”，然后左键点击）。最好将 Deepin 安装在 C 盘，这样在启动 Deepin 时会很快，而且开机一般会有系统启动选择窗口（你是想进入Windows还是Deepin呢）。  

给 Deepin 分配空间，最小不应小于 10G，看你 C 盘大小吧，或者说你使用哪个系统偏多。我 C 盘 128G，分给 Deepin 了 30G（毕竟 Windows 深度用户~ 慢慢来嘛）。  

至于怎么分磁盘，看下面的步骤。  
1. 右键点击 C 盘（我 C 盘已经分过了，都一样）
2. 点击压缩卷；
3. 如果要分出 30G，就是：30G * 1024 == 30720M，点击压缩  
   
   ![磁盘分区](img/yasuo.png)  

4. 这时候就会多出一个磁盘，只是这个磁盘还没有分配出来
5. 右键然后选择 “新建简单卷”，下一步、下一步然后完成即可。

### 安装 Deepin

安装 Deepin 之前需要下载 Deepin 系统镜像。来到 [官网下载页](https://www.deepin.org/download/) 点击官方下载。最好使用迅雷，这样下载会比较快。  

下载之后，最好也要校验一下。来到 [这个网址进行校验](https://wiki.deepin.org/wiki/%E5%8E%9F%E7%94%9F%E5%AE%89%E8%A3%85)。  

![校验](img/md5.png)

校验之后，打开 Deepin 镜像文件，里面有一个软件。  

![镜像文件](./img/deepin.os.png)  

把这个软件复制一份到别的地方然后打开，这个软件是制作 Deepin U盘启动盘的工具。插入你的 U盘，如果U盘有重要数据，应备份一下。在 U 盘制作软件里选择下载的 Deepin 镜像文件，点击开始制作即可。  

![U盘制作](img/deepin_u.png)  

制作完成后就可以安装了。  

安装和 Windows 差不多，需要将 `Secure Boot` 设置为 `disabled`。然后按 F12 进入 `Boot Option Menu` 界面，选择 `EFI USB Devece`，就可以安装了。  

需要注意的是，Boot Option Menu 中可能没有 `EFI USB Device` 选项。则选择下面的选项。  

![Linpus lite](./img/deepin_1.png)  

然后会进入安装界面，选择 `Install Deepin` 选项。填写用户名和密码，然后选择安装地址。  

安装地址可以选择“高级安装”。  

![高级安装](./img/deepin_2.png)  

![配置磁盘](./img/deepin_3.png)  

然后点击确定，开始安装。  

安装完点击“立即体验”，电脑会重启，然后来到启动选择界面。

![启动界面](./img/qd.png)  

在选安装路径是，选择从 C 盘分出来的空间。等待安装完成。  

安装完成后，电脑会重新启动。我在安装时，重启后老是又来到安装界面，不知道为啥。最好把 Deepin 安装在 C 盘，安装到其他盘很可能开机时没有 Deepin 启动项。我安装了很多次系统这期间，主要就是在整 Deepin 的开机启动，结果没弄成，安装到 C 盘后，就自动会有，而且开机很快。  

以上就是安装 Windows + Deepin 双系统的全部过程。  

### 总结

#### 1. 我为什么装了那么多次系统？

装了那么多次主要是在安装 Deepin，Deepin 安装很快，没有 Windows 那么炫。Windows 安装的时候会有微软小娜做引导，而 Deepin 很简洁。之所以装了那么多次，是因为我总是没有 Deepin 的启动项开机时。后来想了想，之所以没有应该是这样的：Windows 是以 UEFI 形式安装的，而安装 Deepin 时我却使用 Legacy 的方式安装的。这种安装方式会让你在 UEFI 模式下只能进入 Windows，而在 Legacy 模式下只能进入 Deepin。  

在安装 Deepin 时，开机按下 F12 后， 我没看到 `EFI USB Device` 的选项，还以为不能在 UEFI 模式下安装 Deepin 呢。原来 `Linpus lite (General UDisk)` 选项就是啊！   

#### 2. 感悟

通过安装系统，我明白了原来安装系统也就那回事，重装系统应该再也不用花那30块钱了。万事开头难，以后应多做实践，多动手尝试。  

做事也不能太过于鲁莽，在转换磁盘时就是因为有点鲁莽导致重装系统。在遇到不确定的事情时，应慎重考虑再行动。






